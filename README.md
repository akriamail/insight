# 🚀 Project Team - Insight Infrastructure

## 项目概述
Project Team Insight Infrastructure 是一个基于 Docker Compose 部署的集成基础设施管理系统。它采用扁平化架构设计，旨在实现“配置与数据分离”，提供一键部署、交互式管理与全量备份功能。

## 功能特性
*   **统一网关管理:** 基于 Nginx Proxy Manager 映射。
*   **核心数据库服务:** PostgreSQL。
*   **分层系统管理:**
    *   **基础运维:** 日常启动、停止、备份及健康监控。
    *   **高级维护:** 环境初始化、生产/开发部署细分、环境变量在线编辑、**n8n 用户紧急创建**、**数据库密码热修改**、防火墙管理及系统重置。

## 快速入门

### 1. 新主机部署流程 (全新服务器)
对于一台完全没有安装过 Docker 的新主机，请按照以下步骤操作：

1.  **初始化基础环境**:
    ```bash
    ./manage.sh
    # 选择 5 (高级维护) -> 选择 1 (新主机部署基础环境)
    ```

2.  **配置环境变量 (重要)**:
    *   系统会自动根据模板生成 `.env` 文件。
    *   **必须修改**：数据库密码、服务域名（如 `yourdomain.com`）。
    *   你可以通过 `manage.sh -> 5 -> 5` 直接在终端编辑配置。

3.  **执行一键部署**:
    *   **生产环境 (境外部署)**: 选择 `5 -> 2` (自动禁用镜像加速)。
    *   **开发环境 (国内部署)**: 选择 `5 -> 3` (自动启用专属加速器)。

### 2. 日志与监控
运行 `./manage.sh` 选择 `3 (状态与监控)` 可一次性查看容器状态及服务器硬件负载。

## 菜单功能详解

**[一级菜单：基础运维]**
*   **1) 🚀 启动服务**: 拉起容器并初始化数据库。
*   **2) 🛑 停止服务**: 安全移除容器。
*   **3) 📊 状态与监控**: 综合健康报告。
*   **4) 📂 数据备份**: 生成全量加密备份包。
*   **5) ⚙️ 高级维护...**: 进入二级菜单。

**[二级菜单：高级维护]**
*   **1) 🛠️ 新主机部署基础环境**: 安装 Docker、配置 Swap、优化内核。
*   **2) ✨ 一键生产环境部署**: 自动化部署，**禁用**镜像加速。
*   **3) 🧪 一键开发环境部署**: 自动化部署，**启用**专属加速。
*   **4) 🧱 防火墙管理**: 基于 UFW 的安全策略管理。
*   **5) 📝 编辑环境变量**: 直接在终端修改 `.env` 配置。
*   **6) 👤 强行创建 n8n 管理员**: 绕过注册流程，直接后台创建账号。
*   **7) 🔐 修改数据库密码**: 热修改数据库密码并同步更新 `.env`。
*   **9) ⚠️ 全量数据恢复**: 从历史备份包中选择版本进行还原。
*   **10) 🗑️ 重置系统 (危险)**: 彻底清理所有数据。

## 环境变量配置
本项目所有敏感信息和自定义参数均存储在 `.env` 文件中。**严禁将包含真实密码的 `.env` 提交到 Git 仓库。**

## 维护规范
*   **安全确认**: 危险操作均设有 `(y/n)` 二次确认。
*   **密码安全**: 部署后请务必通过 `manage.sh` 检查并修改默认的占位符密码。
*   **备份恢复**: 建议定期执行备份，并在执行重大变更前创建快照。
